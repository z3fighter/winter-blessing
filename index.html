<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è£å¹¸-ç«‹å†¬-å¹¸ç¦</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#E63946',
                        secondary: '#457B9D',
                        warm: '#F1FAEE',
                        snow: '#FFFFFF',
                    },
                    fontFamily: {
                        chinese: ['"Microsoft YaHei"', '"PingFang SC"', 'sans-serif'],
                    },
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bg-blur {
                backdrop-filter: blur(8px);
            }
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            }
            .snowflake {
                position: absolute;
                top: -10%;
                background-color: white;
                border-radius: 50%;
                filter: blur(1px);
                animation: fall linear infinite;
                opacity: 0.8;
                z-index: 999;
            }
            .popup {
                position: fixed;
                background: linear-gradient(135deg, rgba(255, 182, 193, 0.95), rgba(255, 228, 181, 0.95));
                border-radius: 16px;
                padding: 18px 22px;
                box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25), 0 0 15px rgba(236, 72, 153, 0.3);
                transform: scale(0);
                animation: popupAnimation 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
                z-index: 1000;
                backdrop-filter: blur(8px);
                border: 2px solid rgba(255, 255, 255, 0.6);
                min-width: 160px;
                max-width: 80vw;
                font-size: 14px;
                touch-action: manipulation;
            }
            
            .popup::before {
                content: '';
                position: absolute;
                top: -15px;
                left: 50%;
                transform: translateX(-50%);
                width: 30px;
                height: 30px;
                background: inherit;
                border-radius: 5px;
                rotate: 45deg;
                border-top: 2px solid rgba(255, 255, 255, 0.6);
                border-left: 2px solid rgba(255, 255, 255, 0.6);
            }
            @keyframes fall {
                to {
                    top: 100%;
                    transform: translateY(0) rotate(360deg);
                }
            }
            @keyframes popupAnimation {
                0% {
                    transform: scale(0);
                    opacity: 0;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }
            .bg-slide {
                animation: slideBackground 20s infinite;
                background-size: cover;
                background-position: center;
                transition: background-image 1s ease-in-out;
            }
            @keyframes slideBackground {
                0%, 100% {
                    background-position: 0% 0%;
                }
                50% {
                    background-position: 100% 100%;
                }
            }
        }
    </style>
</head>
<body class="font-chinese overflow-hidden min-h-screen">
    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <!-- å°†éŸ³é¢‘æºè·¯å¾„æ”¹ä¸ºç›¸å¯¹è·¯å¾„ -->
    <audio id="bgMusic" loop>
        <source src="é…éŸ³.mp3" type="audio/mpeg">
    </audio>
    
    <!-- å°†è§†é¢‘æºè·¯å¾„æ”¹ä¸ºç›¸å¯¹è·¯å¾„ -->
    <video id="background" class="fixed inset-0 z-0 object-cover w-full h-full" autoplay muted loop playsinline preload="auto">
        <source src="è£å¹¸.mp4" type="video/mp4">
    </video>
    
    <!-- é›ªèŠ±å®¹å™¨ -->
    <div id="snow-container" class="fixed inset-0 z-10 pointer-events-none"></div>
    
    <!-- ä¸»å†…å®¹ -->
    <div class="relative z-20 flex flex-col items-center justify-center min-h-screen text-white">
        <div class="bg-blur bg-black/30 p-8 rounded-2xl shadow-xl max-w-2xl w-full mx-4">
            <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-center mb-6 text-shadow">
                <i class="fa fa-snowflake-o text-snow mr-3"></i>ç«‹å†¬ç¥ç¦
                <i class="fa fa-snowflake-o text-snow ml-3"></i>
            </h1>
            
            <div class="bg-warm/20 p-6 rounded-xl mb-8">
                <p class="text-[clamp(1rem,2vw,1.25rem)] leading-relaxed">
                    è£å¹¸ï¼š<br><br>
                    å†¬æ—¥å·²è‡³ã€‚ç«‹å†¬æ—¶èŠ‚ï¼Œhopefullyï¼š
                </p>
                <ul class="list-disc pl-6 mt-4 space-y-2">
                    <li>å°æ‰‹æ˜¯ä¸€ç›´æš–æš–çš„ï¼</li>
                    <li>é’±åŒ…æ˜¯ä¸€ç›´é¼“é¼“çš„!</li>
                    <li>å¿ƒæƒ…æ˜¯ä¸€ç›´ä¹ä¹çš„!</li>
                    <li>ç‹è€…æ˜¯ä¸€ç›´Vicioryçš„!</li>
                    <li>LOVEèº«è¾¹æ˜¯æœ‰æˆ‘çš„!!!</li>
                </ul>
                <p class="mt-4">
                    å±±æœ‰æœ¨å…®æœ¨æœ‰æï¼Œå¿ƒæ‚¦å›å…®å›ä¸çŸ¥ã€‚ã€‚
                </p>
                <p class="mt-4 text-center font-bold text-lg">
                    ç«‹å†¬å¿«ä¹ï¼
                </p>
                <p class="mt-4 text-right italic">
                    - æ°¸è¿œçš„æœ‹å‹
                </p>
            </div>
            
            <div class="flex justify-center">
                <button id="musicToggle" class="flex items-center gap-2 bg-white/20 hover:bg-white/30 py-3 px-6 rounded-full transition-all duration-300">
                    <i id="musicIcon" class="fa fa-volume-up"></i>
                    <span>èƒŒæ™¯éŸ³ä¹</span>
                </button>
            </div>
        </div>
        
        <div class="mt-8 text-sm text-white/80">
            <p>é›ªèŠ±â„ï¸</p>
        </div>
    </div>

    <script>
        // ç¥ç¦çŸ­è¯­æ•°ç»„ - æ›´æ–°ä¸ºç”·ç”Ÿå¯¹å¥³ç”Ÿçš„ç«‹å†¬æ…°é—®
        const blessings = [
            "è£å¹¸ï¼Œç«‹å†¬äº†ï¼Œè®°å¾—å¤šç©¿ç‚¹ï¼Œåˆ«å†»ç€æˆ‘çš„å°å®è´",
            "äº²çˆ±çš„ï¼Œä»Šå¤©ç«‹å†¬ï¼Œä½ çš„æ‰‹è¿˜å†·å—ï¼Ÿæˆ‘æƒ³æ¸©æš–ä½ æ•´ä¸ªå†¬å¤©",
            "è£å¹¸ï¼Œå¤©æ°”å‡‰äº†ï¼Œæ™šä¸Šç¡è§‰è¦ç›–å¥½è¢«å­å“¦",
            "å¹¸å¹¸ï¼Œç«‹å†¬äº†å¤šç©¿ç‚¹å“¦ï¼æˆ‘ä¸åœ¨ä½ èº«è¾¹è¦å­¦ä¼šç…§é¡¾è‡ªå·±",
            "äº²çˆ±çš„ï¼Œç«‹å†¬å¿«ä¹ï¼Œå¸Œæœ›æˆ‘çš„é—®å€™èƒ½è®©ä½ æ„Ÿåˆ°ä¸€ä¸æ¸©æš–",
            "å®è´ï¼Œä»Šå¤©å¼€å§‹é™æ¸©äº†ï¼Œè®°å¾—æŠŠæˆ‘é€ä½ çš„å›´å·¾æˆ´ä¸Š",
            "ä¸«å¤´ï¼Œç«‹å†¬äº†ï¼Œè®°å¾—å¤šå–çƒ­æ°´ï¼Œåˆ«è®©æˆ‘æ‹…å¿ƒä½ ",
            "äº²çˆ±çš„ï¼Œå¤©æ°”å˜å†·äº†ï¼Œæˆ‘ä¸åœ¨ä½ è¾¹è¾¹è¦å¥½å¥½ç…§é¡¾è‡ªå·±",
            "å°å‚»ç“œï¼Œç«‹å†¬äº†ï¼Œè®°å¾—åŠ è¡£æœï¼Œæˆ‘ä¼šåœ¨è¿œæ–¹æƒ³ä½ çš„",
            "å®è´ï¼Œç«‹å†¬å¿«ä¹ï¼Œè™½ç„¶ä¸èƒ½é™ªåœ¨ä½ è¾¹è¾¹ï¼Œä½†æˆ‘çš„å¿ƒä¸€ç›´å’Œä½ åœ¨ä¸€èµ·",
            "äº²çˆ±çš„ï¼Œä»Šå¤©ç«‹å†¬ï¼Œæƒ³ä½ çš„å¿ƒæƒ…åˆå¤šäº†ä¸€åˆ†ç‰µæŒ‚",
            "ä¸«å¤´ï¼Œå¤©å‡‰äº†ï¼Œä½ æ˜¯æˆ‘çš„å°å¤ªé˜³ï¼Œæ¸©æš–äº†æˆ‘çš„æ•´ä¸ªä¸–ç•Œ",
            "å®è´ï¼Œç«‹å†¬äº†ï¼Œè®°å¾—æŒ‰æ—¶åƒé¥­ï¼Œåˆ«è®©è‡ªå·±é¥¿ç€",
            "äº²çˆ±çš„ï¼Œé£å¤§äº†ï¼Œå‡ºé—¨è®°å¾—æˆ´å¸½å­ï¼Œåˆ«å¹æ„Ÿå†’äº†",
            "ä¸«å¤´ï¼Œç«‹å†¬å¿«ä¹ï¼Œæ„¿æˆ‘çš„çˆ±èƒ½æ¸©æš–ä½ æ•´ä¸ªå†¬å¤©",
            "å®è´ï¼Œä»Šå¤©å¼€å§‹é™æ¸©ï¼Œè®°å¾—å¸¦ä¸Šæˆ‘ç»™ä½ ä¹°çš„æ‰‹å¥—",
            "äº²çˆ±çš„ï¼Œç«‹å†¬äº†ï¼Œæ™šä¸Šæ—©ç‚¹ç¡ï¼Œåˆ«ç†¬å¤œäº†",
            "ä¸«å¤´ï¼Œå¤©è¶Šæ¥è¶Šå†·äº†ï¼Œæˆ‘ä¸åœ¨ä½ è¾¹è¾¹è¦å¥½å¥½ä¿æš–",
            "å®è´ï¼Œç«‹å†¬å¿«ä¹ï¼Œè™½ç„¶ä¸èƒ½ä¸ºä½ æš–æ‰‹ï¼Œä½†æˆ‘çš„å¿ƒæ°¸è¿œä¸ºä½ è·³åŠ¨",
            "äº²çˆ±çš„ï¼Œå¤©æ°”å˜å†·äº†ï¼Œè®°å¾—å–æˆ‘ç»™ä½ ä¹°çš„ä¿æ¸©æ¯",
            "ä¸«å¤´ï¼Œç«‹å†¬äº†ï¼Œå¸Œæœ›æˆ‘çš„é—®å€™èƒ½åƒé˜³å…‰ä¸€æ ·æ¸©æš–ä½ ",
            "å®è´ï¼Œä»Šå¤©ç«‹å†¬ï¼Œæƒ³ä½ äº†ï¼Œä½ æœ‰æ²¡æœ‰æƒ³æˆ‘ï¼Ÿ",
            "é£å¾ˆå¤§ï¼Œå‡ºé—¨è¦å°å¿ƒï¼Œåˆ«è¢«å¹è·‘äº†æˆ‘çš„å°å®è´",
            "ç«‹å†¬å¿«ä¹ï¼Œä½ çš„ç¬‘å®¹æ˜¯æˆ‘å†¬å¤©æœ€æ¸©æš–çš„é˜³å…‰",
            "å®è´ï¼Œå¤©å‡‰äº†ï¼Œè®°å¾—åŠ è¡£æœï¼Œæˆ‘ä¼šä¸€ç›´æƒ³ä½ çš„",
            "äº²çˆ±çš„ï¼Œç«‹å†¬äº†ï¼Œå¸Œæœ›æˆ‘ä»¬èƒ½æ—©æ—¥è§é¢ï¼Œæˆ‘æƒ³æŠ±æŠ±ä½ ",
            "ä½ æ˜¯æˆ‘çš„ç‰µæŒ‚ï¼Œè¦å¥½å¥½çš„",
            "å®è´ï¼Œç«‹å†¬å¿«ä¹ï¼Œçˆ±ä½ çš„å¿ƒæ°¸è¿œä¸å˜",
            "äº²çˆ±çš„ï¼Œä»Šå¤©ç«‹å†¬ï¼Œå¸Œæœ›æˆ‘çš„ç¥ç¦èƒ½ç»™ä½ å¸¦æ¥æ¸©æš–",
            "å¹¸ï¼Œé£å¤§äº†ï¼Œè®°å¾—å…³ç´§çª—æˆ·ï¼Œåˆ«è®©å†·é£å¹åˆ°ä½ "
        ];

        const background = document.getElementById('background');
        const snowContainer = document.getElementById('snow-container');
        const bgMusic = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        const musicIcon = document.getElementById('musicIcon');
        
        // åˆå§‹åŒ–èƒŒæ™¯éŸ³ä¹
        bgMusic.volume = 0.5;
        
        // éŸ³ä¹æ§åˆ¶
        musicToggle.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            if (bgMusic.paused) {
                bgMusic.play().catch(e => {
                    console.log('éŸ³é¢‘æ’­æ”¾éœ€è¦ç”¨æˆ·äº¤äº’');
                });
                musicIcon.className = 'fa fa-volume-up';
            } else {
                bgMusic.pause();
                musicIcon.className = 'fa fa-volume-off';
            }
        });
        
        // ç§»åŠ¨è®¾å¤‡è§¦æ‘¸ä¼˜åŒ–
        musicToggle.addEventListener('touchstart', (e) => {
            e.preventDefault();
            e.stopPropagation();
            // è§¦æ‘¸äº‹ä»¶å¤„ç†
        }, { passive: false });
        
        // å°è¯•åœ¨ç”¨æˆ·äº¤äº’åè‡ªåŠ¨æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼ˆæµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥è¦æ±‚ï¼‰
        document.addEventListener('click', () => {
            if (bgMusic.paused) {
                bgMusic.play().catch(e => {
                    console.log('éŸ³é¢‘æ’­æ”¾éœ€è¦ç”¨æˆ·äº¤äº’');
                });
                musicIcon.className = 'fa fa-volume-up';
            }
        }, { once: true });
        
        // é¡µé¢åŠ è½½åå°è¯•è‡ªåŠ¨æ’­æ”¾ï¼Œä½†å¯èƒ½ä¼šè¢«æµè§ˆå™¨é˜»æ­¢
        window.addEventListener('load', () => {
            bgMusic.play().catch(e => {
                console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’');
            });
        });
        
        // åˆ›å»ºé›ªèŠ±æ•ˆæœ
        function createSnowflake() {
            // æ€§èƒ½ä¼˜åŒ–ï¼šé™åˆ¶æœ€å¤§é›ªèŠ±æ•°é‡
            if (document.querySelectorAll('.snowflake').length > 100) {
                return;
            }
            
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            
            // ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–ï¼šæ›´å°çš„é›ªèŠ±
            const baseSize = window.innerWidth < 480 ? 3 : 5;
            const size = Math.random() * 8 + baseSize;
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            
            // éšæœºä½ç½®
            snowflake.style.left = `${Math.random() * 100}vw`;
            
            // éšæœºé€æ˜åº¦
            snowflake.style.opacity = Math.random() * 0.8 + 0.2;
            
            // ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–ï¼šè°ƒæ•´é™è½é€Ÿåº¦
            const baseDuration = window.innerWidth < 480 ? 8 : 10;
            const duration = Math.random() * 8 + baseDuration;
            snowflake.style.animationDuration = `${duration}s`;
            
            // éšæœºå»¶è¿Ÿ
            snowflake.style.animationDelay = `${Math.random() * 5}s`;
            
            // éšæœºç¼©æ”¾
            snowflake.style.transform = `scale(${Math.random() * 0.5 + 0.5})`;
            
            snowContainer.appendChild(snowflake);
            
            // ç§»é™¤é›ªèŠ±
            setTimeout(() => {
                try {
                    snowflake.remove();
                } catch (e) {
                    console.log('ç§»é™¤é›ªèŠ±æ—¶å‡ºé”™:', e);
                }
            }, duration * 1000);
        }
        
        // è‡ªåŠ¨ç”Ÿæˆé›ªèŠ± - ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–é¢‘ç‡
        const snowInterval = window.innerWidth < 480 ? 300 : 200;
        setInterval(createSnowflake, snowInterval);
        
        // ç‚¹å‡»å±å¹•ç”Ÿæˆæ›´å¤šé›ªèŠ±
        document.addEventListener('click', () => {
            // æ€§èƒ½ä¼˜åŒ–ï¼šé™åˆ¶æ¯æ¬¡ç”Ÿæˆçš„é›ªèŠ±æ•°é‡
            const currentSnowflakes = document.querySelectorAll('.snowflake').length;
            if (currentSnowflakes < 200) {
                const count = window.innerWidth < 480 ? 5 : 10; // ç§»åŠ¨è®¾å¤‡å‡å°‘æ•°é‡
                for (let i = 0; i < count; i++) {
                    createSnowflake();
                }
            }
        });
        
        // è§¦æ‘¸è®¾å¤‡æ”¯æŒ
        document.addEventListener('touchstart', () => {
            const currentSnowflakes = document.querySelectorAll('.snowflake').length;
            if (currentSnowflakes < 200) {
                const count = window.innerWidth < 480 ? 5 : 10;
                for (let i = 0; i < count; i++) {
                    createSnowflake();
                }
            }
        }, { passive: true });
        
        // åˆ›å»ºç¥ç¦å¼¹çª— - ç¾åŒ–æ ·å¼å¹¶ä½¿ç”¨ç”·ç”Ÿå¯¹å¥³ç”Ÿçš„æ…°é—®è¯­
        function createBlessingPopup() {
            const popup = document.createElement('div');
            popup.className = 'popup';
            
            // éšæœºç¥ç¦
            const blessing = blessings[Math.floor(Math.random() * blessings.length)];
            
            // ä½¿ç”¨ä¸åŒçš„å›¾æ ‡å¢åŠ è¶£å‘³æ€§
            const icons = ['fa-heart', 'fa-heartbeat', 'fa-star', 'fa-sun-o', 'fa-coffee', 'fa-gift', 'fa-heart-o', 'fa-star-o'];
            const randomIcon = icons[Math.floor(Math.random() * icons.length)];
            
            // æ ¹æ®å±å¹•å®½åº¦è°ƒæ•´å­—ä½“å¤§å°
            const fontSize = window.innerWidth < 480 ? '12px' : '14px';
            
            popup.innerHTML = `
                <div class="relative">
                    <div class="absolute -top-4 -right-4 text-2xl text-primary opacity-80">
                        <i class="fa ${randomIcon}"></i>
                    </div>
                    <div class="flex items-center gap-2 p-1">
                        <span class="text-primary">ğŸ’–</span>
                        <p class="text-gray-800 font-medium leading-relaxed" style="font-family: 'Microsoft YaHei', sans-serif; font-size: ${fontSize};">
                            ${blessing}
                        </p>
                    </div>
                </div>
            `;
            
            // éšæœºä½ç½® - ç¡®ä¿ä¸ä¼šè¶…å‡ºå±å¹•ï¼Œç§»åŠ¨è®¾å¤‡ä¼˜åŒ–
            const popupWidth = window.innerWidth < 480 ? 160 : 240;
            const popupHeight = window.innerHeight < 600 ? 80 : 100;
            const left = Math.random() * (window.innerWidth - popupWidth - 20) + 10;
            const top = Math.random() * (window.innerHeight - popupHeight - 20) + 10;
            popup.style.left = `${left}px`;
            popup.style.top = `${top}px`;
            
            // éšæœºå¤§å° - ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–
            const scale = window.innerWidth < 480 ? 
                (Math.random() * 0.2 + 0.8) : 
                (Math.random() * 0.3 + 0.9);
            popup.style.transform = `scale(${scale})`;
            
            // æ·»åŠ éšæœºæ—‹è½¬è§’åº¦ä½¿å¸ƒå±€æ›´è‡ªç„¶
            const rotation = Math.random() * 8 - 4; // -4åº¦åˆ°4åº¦ä¹‹é—´çš„éšæœºæ—‹è½¬ï¼ˆç§»åŠ¨è®¾å¤‡ç¼©å°èŒƒå›´ï¼‰
            popup.style.transform += ` rotate(${rotation}deg)`;
            
            // å¢åŠ z-indexä½¿æ–°å¼¹çª—åœ¨ä¸Šæ–¹
            popup.style.zIndex = 1000 + document.querySelectorAll('.popup').length;
            
            // æ·»åŠ äº¤äº’åŠ¨ç”»æ•ˆæœ
            popup.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';
            
            // é¼ æ ‡æ‚¬åœæ•ˆæœ
            popup.addEventListener('mouseenter', function() {
                this.style.transform = `scale(${scale * 1.2}) rotate(${rotation}deg)`;
                this.style.boxShadow = '0 12px 40px rgba(0, 0, 0, 0.3), 0 0 20px rgba(236, 72, 153, 0.4)';
            });
            
            popup.addEventListener('mouseleave', function() {
                this.style.transform = `scale(${scale}) rotate(${rotation}deg)`;
                this.style.boxShadow = '0 8px 30px rgba(0, 0, 0, 0.25), 0 0 15px rgba(236, 72, 153, 0.3)';
            });
            
            // è§¦æ‘¸è®¾å¤‡æ”¯æŒ
            popup.addEventListener('touchstart', function() {
                this.style.transform = `scale(${scale * 1.2}) rotate(${rotation}deg)`;
                this.style.boxShadow = '0 12px 40px rgba(0, 0, 0, 0.3), 0 0 20px rgba(236, 72, 153, 0.4)';
            }, { passive: true });
            
            popup.addEventListener('touchend', function() {
                this.style.transform = `scale(${scale}) rotate(${rotation}deg)`;
                this.style.boxShadow = '0 8px 30px rgba(0, 0, 0, 0.25), 0 0 15px rgba(236, 72, 153, 0.3)';
            }, { passive: true });
            
            document.body.appendChild(popup);
            
            // ç§»åŠ¨è®¾å¤‡ä¸Šæ·»åŠ è‡ªåŠ¨ç§»é™¤ï¼Œé¿å…è¿‡å¤šå¼¹çª—å †ç§¯
            if (window.innerWidth < 480) {
                setTimeout(() => {
                    try {
                        // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
                        popup.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        popup.style.opacity = '0';
                        popup.style.transform = `scale(${scale * 0.8}) rotate(${rotation}deg)`;
                        
                        setTimeout(() => {
                            if (popup.parentNode) {
                                popup.parentNode.removeChild(popup);
                            }
                        }, 500);
                    } catch (e) {
                        console.log('ç§»é™¤å¼¹çª—æ—¶å‡ºé”™:', e);
                    }
                }, 5000); // 5ç§’åè‡ªåŠ¨ç§»é™¤
            }
        }
        
        // å®šæœŸåˆ›å»ºç¥ç¦å¼¹çª— - ç½‘é¡µæ‰“å¼€3ç§’åæ‰å¼€å§‹å¼¹çª—ï¼Œç§»åŠ¨è®¾å¤‡ä¼˜åŒ–
        const popupInterval = window.innerWidth < 480 ? 1500 : 700; // ç§»åŠ¨è®¾å¤‡é™ä½å¼¹çª—é¢‘ç‡
        
        setTimeout(() => {
            setInterval(() => {
                // é™åˆ¶å¼¹çª—æ•°é‡ï¼Œé¿å…è¿‡å¤šå †ç§¯
                const currentPopups = document.querySelectorAll('.popup').length;
                if (currentPopups < 5) { // æœ€å¤š5ä¸ªå¼¹çª—åŒæ—¶å­˜åœ¨
                    createBlessingPopup();
                }
            }, popupInterval);
        }, 3000);
        
        // é¡µé¢åŠ è½½æ—¶ç”Ÿæˆåˆå§‹é›ªèŠ± - ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–
        window.addEventListener('load', () => {
            const initialCount = window.innerWidth < 480 ? 30 : 50; // ç§»åŠ¨è®¾å¤‡å‡å°‘åˆå§‹é›ªèŠ±æ•°é‡
            for (let i = 0; i < initialCount; i++) {
                createSnowflake();
            }
        });
        
        // ç§»åŠ¨è®¾å¤‡æ—‹è½¬æ—¶é‡æ–°è°ƒæ•´å¸ƒå±€
        window.addEventListener('resize', () => {
            // ç§»é™¤è¿‡å¤šçš„å¼¹çª—
            const popups = document.querySelectorAll('.popup');
            const maxPopups = window.innerWidth < 480 ? 3 : 5;
            if (popups.length > maxPopups) {
                for (let i = maxPopups; i < popups.length; i++) {
                    try {
                        popups[i].style.transition = 'opacity 0.3s ease';
                        popups[i].style.opacity = '0';
                        setTimeout(() => popups[i].remove(), 300);
                    } catch (e) {
                        console.log('ç§»é™¤å¼¹çª—æ—¶å‡ºé”™:', e);
                    }
                }
            }
        });
        
        // ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–ï¼šç¦æ­¢åŒå‡»ç¼©æ”¾
        document.addEventListener('dblclick', (e) => {
            if (window.innerWidth < 480) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // ä¼˜åŒ–ç§»åŠ¨è®¾å¤‡æ»šåŠ¨è¡Œä¸º
        document.body.style.touchAction = 'manipulation';
    </script>
</body>
</html>